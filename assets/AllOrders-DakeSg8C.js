import{r as p,c as x,j as e,H as f,a as j}from"./index-DNJDnrwC.js";class d extends Error{}d.prototype.name="InvalidTokenError";function b(a){return decodeURIComponent(atob(a).replace(/(.)/g,(s,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function w(a){let s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b(s)}catch{return atob(s)}}function g(a,s){if(typeof a!="string")throw new d("Invalid token specified: must be a string");s||(s={});const n=s.header===!0?0:1,r=a.split(".")[n];if(typeof r!="string")throw new d(`Invalid token specified: missing part #${n+1}`);let l;try{l=w(r)}catch(i){throw new d(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(l)}catch(i){throw new d(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}function N(){const{id:a}=g(localStorage.getItem("userToken")),{getUserOrders:s}=p.useContext(x);let[n,r]=p.useState(!0),[l,i]=p.useState(null);async function m(t){const{data:o}=await s(t);i(o),r(!1)}return p.useEffect(()=>{m(a)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"My Orders"})]}),e.jsxs("div",{className:"bg-main-light p-3 mt-5 ",children:[e.jsx("h2",{className:" fw-bolder text-center p-2",children:"My Orders"}),n?e.jsx(j,{}):l.length==0?e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("p",{className:"h3 py-5 fw-bolder text-main",children:' "Your order history is empty. Start shopping now to fill it with your favorite items!"'})," "]}):e.jsx(e.Fragment,{children:l.map((t,o)=>e.jsxs("div",{className:"row ",children:[e.jsxs("h2",{className:" fw-bold",children:["Order :",e.jsxs("span",{className:" text-main",children:[" ",o+1]})]}),e.jsxs("p",{className:"  col-md-6 fw-bolder d-inline-block",children:[" Shipping Address: ",e.jsxs("span",{className:"text-main fw-bold",children:[" ",t.shippingAddress.details,", ",t.shippingAddress.city]})]}),e.jsxs("p",{className:" col-md-6 fw-bolder d-inline-block",children:[" Phone: ",e.jsxs("span",{className:"text-main fw-bold",children:[" ",t.shippingAddress.phone]})]}),e.jsxs("p",{className:" col-md-6 fw-bolder d-inline-block",children:["TotalOrderPrice: ",e.jsxs("span",{className:"text-main fw-bold",children:[" ",t.totalOrderPrice," "]})]}),e.jsxs("p",{className:" col-md-6 fw-bolder d-inline-block",children:[" Payment Method : ",e.jsxs("span",{className:"text-main fw-bold",children:[t.paymentMethodType," "]})]}),e.jsxs("p",{className:" col-md-6 fw-bolder d-inline-block",children:[" Is Paid : ",e.jsxs("span",{className:"text-main fw-bold",children:[t.isPaid==!1?e.jsx("span",{children:"Not yet"}):e.jsx("span",{children:"Paid"})," "]})]}),e.jsxs("p",{className:" col-md-6 fw-bolder d-inline-block",children:["Is Delivered : ",e.jsxs("span",{className:"text-main fw-bold",children:[" ",t.isDelivered==!1?e.jsx("span",{children:"Not yet"}):e.jsx("span",{children:"Delivered"})]})]}),t.cartItems.map((c,h)=>e.jsxs("div",{className:"row border-1 border-bottom m-2 align-items-center py-2",children:[e.jsx("div",{className:"col-md-2",children:e.jsx("img",{src:c.product.imageCover,alt:c.product.title,className:"w-100"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsx("h3",{className:"h5 fw-bolder",children:c.product.title.split(" ").splice(0,3).join(" ")}),e.jsxs("p",{children:[e.jsxs("span",{className:"text-main",children:[c.price," "]})," EGP"]}),e.jsxs("p",{children:["QTY : ",e.jsxs("span",{className:"text-main",children:[c.count," "]})]})]})]},h))]},o))})]})]})}export{N as default};
