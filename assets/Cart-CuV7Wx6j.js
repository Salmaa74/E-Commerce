import{r as i,c as p,j as e,H as N,L as C,a as g}from"./index-Bs8QTJ__.js";function v(){let{getCart:m,deleteItem:r,updateCount:o,clearCart:x,cartNum:h}=i.useContext(p),[j,s]=i.useState(!0),[n,a]=i.useState(null);async function u(){let{data:t}=await m();a(t),s(!1)}async function f(t){s(!0);let{data:l}=await r(t);a(l),s(!1)}async function b(){s(!0);let{data:t}=await x();a(t),s(!1)}async function d(t,l){if(l<1){let{data:c}=await r(t);a(c)}else{let{data:c}=await o(t,l);a(c)}}return i.useEffect(()=>{u()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"My Cart"})]}),e.jsxs("div",{className:"bg-main-light p-3 mt-5",children:[e.jsx("h2",{className:" fw-bolder text-center",children:"Cart Shop"}),j?e.jsx(C,{}):h==0?e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("p",{className:"h3 py-5 fw-bolder text-main",children:' "Uh oh! Your cart seems lonely. Explore our store and add items to bring it back to life."'})," "]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-between ",children:[e.jsxs("p",{children:["Total Price: ",e.jsx("span",{className:"text-main",children:n.data.totalCartPrice})," EGP"]}),e.jsxs("p",{children:["Total Number of items: ",e.jsx("span",{className:"text-main",children:n.numOfCartItems})]})]}),n.data.products.map(t=>e.jsxs("div",{className:"row border-1 border-bottom m-2 align-items-center py-2",children:[e.jsx("div",{className:"col-md-2",children:e.jsx("img",{src:t.product.imageCover,alt:t.product.title,className:"w-100"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsx("h3",{className:"h5 fw-bolder",children:t.product.title.split(" ").splice(0,3).join(" ")}),e.jsxs("p",{children:[e.jsxs("span",{className:"text-main",children:[t.price," "]})," EGP"]}),e.jsxs("button",{className:"btn btn-sm m-0 p-0 text-danger",onClick:()=>f(t.product._id),children:[e.jsx("i",{className:"fas fa-sm fa-trash text-danger"})," Remove"]})]}),e.jsxs("div",{className:"col-md-1",children:[e.jsx("button",{className:"btn brdr p-1 btn-outline-main",onClick:()=>d(t.product._id,t.count+1),children:"+"}),e.jsx("span",{className:"mx-2",children:t.count}),e.jsx("button",{className:"btn brdr p-1 btn-outline-main",onClick:()=>d(t.product._id,t.count-1),children:"-"})]})]},t.product._id)),e.jsxs("div",{className:" d-flex justify-content-center m-3",children:[e.jsxs("button",{className:"btn btn-outline-danger  w-25",onClick:()=>b(),children:[e.jsx("i",{className:"fas fa-sm fa-trash "})," Clear"]}),e.jsx(g,{className:"btn btn-outline-main w-25 ms-5",to:`/shippingAddress/${n.data._id}`,children:"CHECKOUT"})]})]})]})]})}export{v as default};
