import{r as t,W as y,e as k,c as D,u as _,b as L,h as P,j as e,L as E,a as S,_ as i,f as o}from"./index-7_Jolw-D.js";function $(){const{addToWishlist:l,removeFromWishlist:d,wishList:c,RemoveClick:m}=t.useContext(y),[h,g]=t.useState({}),[r,u]=t.useState([]),[x,f]=t.useState(!0),{id:n}=k(),{addToCart:j}=t.useContext(D),{Categories:p}=_(({categorie:s})=>s),N=L();t.useEffect(()=>{N(P(n))},[]);async function w(s){let{data:a}=await j(s);a.status=="success"?i.success(a.message):i.error(a.message)}async function C(s){if(c.includes(s)){const{data:a}=await d(s);a.status==="success"?i.success(a.message):i.error(a.message),m(s)}else{const{data:a}=await l(s);a.status=="success"?i.success(a.message):i.error(a.message)}}async function v(s){let{data:a}=await o.get(`https://ecommerce.routemisr.com/api/v1/categories/${s}`);g(a.data)}async function b(s){let{data:a}=await o.get(`https://ecommerce.routemisr.com/api/v1/products?category=${s}`);u(a.data),f(!1)}return t.useEffect(()=>{v(n),b(n)},[]),e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h1 fw-bold text-center pt-5",children:h.name}),x?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row g-2 my-5",children:p.map(s=>e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"p-2 border rounded-3 ",children:e.jsx("p",{className:" text-center fw-bold h6 text-main",children:s.name})})},s._id))}),e.jsx("div",{className:"row gy-4",children:r.length!==0?r.map(s=>e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"product p-2",children:[e.jsxs(S,{to:`/ProductDetails/${s.id}`,children:[e.jsx("img",{src:s.imageCover,alt:s.title,className:"w-100"}),e.jsx("span",{className:"font-sm text-main",children:s.category.name}),e.jsx("h3",{className:"h5",children:s.title.split(" ").splice(0,2).join(" ")}),e.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[e.jsxs("span",{className:"font-sm ",children:[s.price," EGP"]}),e.jsxs("span",{className:"font-sm",children:[e.jsx("i",{className:"fas fa-star rating-color me-1"}),s.ratingsAverage]})]})]}),e.jsxs("div",{className:" text-center ",children:[e.jsx("button",{onClick:()=>w(s._id),className:"btn btn-outline-main  btn-sm w-75  mt-2",children:"Add to Cart"}),e.jsx("span",{className:"btn",onClick:()=>{C(s.id)},children:e.jsx("i",{className:`fa-solid cursor-pointer ${c.includes(s.id)?"text-danger fa-regular fa-heart ":"fa-solid fa-heart-crack text-black"}`})})]}),"              "]})},s.id)):e.jsx("div",{className:" d-flex justify-content-center align-items-center my-5",children:e.jsx("p",{className:"h2 fw-bolder",children:`"Looks like our stock is taking a breather! Don't worry, we're in the process of replenishing our shelves with fantastic products. Meanwhile, why not  browse our other sections for great deals and offerings? Thank you for your understanding!"`})})})]})]})}export{$ as default};
